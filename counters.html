<!doctype html><html><head><meta charset="utf-8"><meta http-equiv="X-UA-Compatible" content="chrome=1"><title>h2zero by synapticloop</title><link rel="stylesheet" href="stylesheets/styles.css"><link rel="stylesheet" href="stylesheets/pygment_trac.css"><link rel="stylesheet" href="stylesheets/prettify.css" type="text/css" /><meta name="viewport" content="width=device-width, initial-scale=1, user-scalable=no"><!--[if lt IE 9]><script src="//html5shiv.googlecode.com/svn/trunk/html5.js"></script><![endif]--><script src="javascripts/prettify.js" type="text/javascript" ></script></head><body><div class="wrapper"><header><h1>h2zero</h1><p>An Object Relationship Mapper (ORM) generator for Java, MySQL and optionally a J2EE container</p><hr /><h2>Navigation</h2><p>&raquo; <a href="index.html">Home</a><br />&raquo; <a href="quick-start.html">Quick Start</a><br />&raquo; Allowable JSON Keys Reference<br />&mdash;&raquo; <a href="allowable-keys-schema-objects.html">Schema Objects</a><br />&mdash;&raquo; <a href="allowable-keys-sql-interactions.html">SQL Interactions</a><br />&raquo; <a href="database-naming-conventions.html">Database Naming Conventions</a><br />&raquo; <a href="generated-code.html">Generated Code</a><br />&raquo; <a href="method-signatures.html">Method Signatures</a><br />&raquo; <a href="validators.html">Validators</a><br />&raquo; <a href="taglibs.html">Tag libraries</a><br />&raquo; <a href="clauses-and-fields.html">Clauses and Fields</a><br /></p><hr /><p>&raquo; <a href="file-format.html">File Format</a><br />&raquo; <a href="options.html">Options</a><br />&raquo; <a href="database.html">Database</a><br />&raquo; <a href="tables.html">Tables</a><br />&mdash;&raquo; <a href="fields.html">Fields</a><br />&mdash;&raquo; <a href="finders.html">Finders</a><br />&mdash;&raquo; <a href="field-finders.html">Field Finders</a><br />&mdash;&raquo; <a href="deleters.html">Deleters</a><br />&mdash;&raquo; <a href="inserters.html">Inserters</a><br />&mdash;&raquo; <a href="updaters.html">Updaters</a><br />&mdash;&raquo; <a href="questions.html">Questions</a><br />&mdash;&raquo; <a href="counters.html">Counters</a><br />&mdash;&raquo; <a href="constants.html">Constants</a><br />&raquo; <a href="views.html">Views</a><br />&mdash;&raquo; <a href="view-finders.html">Finders</a><br />&mdash;&raquo; <a href="view-field-finders.html">Field Finders</a><br />&mdash;&raquo; <a href="view-questions.html">Questions</a><br />&mdash;&raquo; <a href="view-counters.html">Counters</a><br /></p><hr /><p class="view"><a href="https://github.com/synapticloop/h2zero">View the Project on GitHub <small>synapticloop/h2zero</small></a></p><ul><li><a href="https://github.com/synapticloop/h2zero/zipball/master">Download <strong>ZIP File</strong></a></li><li><a href="https://github.com/synapticloop/h2zero/tarball/master">Download <strong>TAR Ball</strong></a></li><li><a href="https://github.com/synapticloop/h2zero">View On <strong>GitHub</strong></a></li></ul><p>This project is maintained by <a href="https://github.com/synapticloop">synapticloop</a> and these pages were generated with <a href="https://github.com/synapticloop/templar-gen/">synapticloop templar-gen</a></p></header><section><h3><a id="h2zero-page" class="anchor" href="#h2zero-page" aria-hidden="true"></a>Documentation for the "<code>counters</code>" JSON key.</h3><p>Counters are simple SQL statements that return one, and only one integer value.</p><p>This is a light-weight way to get a count of something without going through a selectClause bean finder.</p><p>The key <code>counters</code> is a JSON Array on the <code>table</code> JSON object, for example:</p><pre class="prettyprint"><code>"tables": [
	{
		"fields": [
			...
		],
		"counters": [
			...
		]
	}
]
</code></pre><h4>Allowable keys for a Counter JSON Object</h4><table><thead><tr><th>key name</th><th>key value type</th><th>usage</th><th>notes</th></tr></thead><tbody><tr><td><strong>name</strong></td><td>String</td><td>mandatory</td><td>This is the name for the counters.  If not present on the JSON object an <code>H2ZeroParseException</code> will be thrown.</td></tr><tr><td><strong><a href="clauses-and-fields.html#selectClause"><code>selectClause</code></a></strong></td><td>String</td><td>optional</td><td><strong>For general SQL interactions:</strong> By default, the select query will be a <code>select * from &lt;table_name&gt,</code> If you wish to over-ride this  default behaviour, then this is the SQL query that will be run.<br /><br /><strong>For <code>inserters</code> SQL interactions:</strong> This is the SQL query that is used to insert the values for the table.  This may also be a cross-table select.<br /><br />The select clause statement <strong>MUST</strong> return one and only one integer result.</td></tr><tr><td><strong><a href="clauses-and-fields.html#selectFields"><code>selectFields</code></a></strong></td><td>JSON Array</td><td>invalid</td><td>Select fields are invalid for the <code>counters</code> JSON object. <br /><br />The select clause is automatically generated with a single select field (which is of type integer). </td></tr><tr><td><strong><a href="clauses-and-fields.html#insertClause"><code>insertClause</code></a></strong></td><td>JSON Array</td><td>undocumented</td><td>The insert clause is only valid for <a href="inserters.html"><code>inserters</code></a> and cannot be used for any other SQL interaction.<br /><br />By default, the insert clause will be a generated with all of the fields from the <code>&lt;table_name&gt</code>, however this may be over-ridden to include only non-nullable fields.<br /><br />If you wish to over-ride this default behaviour, then this is the SQL query that will be run.<br /><br />This will generate a <strong>FATAL</strong> validation message if present on the JSON object.</td></tr><tr><td><strong><a href="clauses-and-fields.html#whereClause"><code>whereClause</code></a></strong></td><td>String</td><td>optional</td><td>Used if the SQL query is parameterised. </td></tr><tr><td><strong><a href="clauses-and-fields.html#whereFields"><code>whereFields</code></a></strong></td><td>JSON Array</td><td>optional</td><td>The name for each of the <a href="clauses-and-fields.html#whereClause"><code>whereClause</code></a> parameters.<br/><br />If there is a <a href="clauses-and-fields.html#whereFields"><code>whereFields</code></a> key on the JSON object without any <a href="clauses-and-fields.html#whereClause"><code>whereClause</code></a> then this will generate a <strong>FATAL</strong> validation message.</td></tr><tr><td><strong><code>unique</code></strong></td><td>boolean</td><td>ignored</td><td>Whether the SQL query will return a single object or an <code>ArrayList</code> of objects.<br /><br />This always returns one, and only one result in the result set of type integer and is therefore un-necessary.</td></tr></tbody></table><h4>Automatically generated methods</h4><p>Every table automatically has <code>countAll</code> methods generated, with the following signatures:</p><pre class="prettyprint lang-java"><code>public static int countAll() throws SQLException
public static int countAll(Connection connection) throws SQLException
public static int countAllSilent()
public static int countAllSilent(Connection connection)
</code></pre><h4>Example 1: Simple Count</h4><pre class="prettyprint"><code>"counters": [
	{
		"name": "countNumberOfUsers",
		"selectClause": "select count(*) from user"
	}
]
</code></pre><p>As it would appear, this would return the number of users in the table. Without a <a href="clauses-and-fields.html#whereClause"><code>whereClause</code></a>, these methods are identical to the <code>countAll</code> methods and consequently aren't necessary, however this is included for illustrative purposes.</p><p>The code that is generated for the above counter resides in the following file location.</p><ul><li><code>src/main/java/synapticloop/sample/h2zero/counter/UserCounter.java</code><br />[<a href="src/main/java/synapticloop/sample/h2zero/counter/UserCounter.java">plain java</a> | <a href="src/main/java/synapticloop/sample/h2zero/counter/UserCounter.java.html">pretty-printed</a>]</li></ul><p>With the following method signatures</p><pre class="prettyprint lang-java"><code>public static int countNumberOfUsers() throws H2ZeroFinderException, SQLException
public static int countNumberOfUsers(Connection connection) throws H2ZeroFinderException, SQLException
public static int countNumberOfUsersSilent()
public static int countNumberOfUsersSilent(Connection connection)
</code></pre><blockquote>Please see the <a href="method-signatures.html"><code>method signatures</code></a> page for information about usage patterns for the various method signatures that are generated.</blockquote><p>You may also use a <code>whereClause</code> and <code>whereFields</code> if you wish to pass in additional parameters.</p><h4>Example 2: Parameterised Count</h4><pre class="prettyprint"><code>"counters": [
	{
		"name": "countNumberOfUsersOverAge",
		"selectClause": "select count(*) from user"
		"whereClause": "where num_user_age > ?",
		"whereFields": [
			"num_user_age"
		]
	}
]
</code></pre><p>In the above example, the count being given is the number of users that are older than a parameterised value that is passed in.</p><p>The code that is generated for the above counter resides in the following file location.</p><ul><li><code>src/main/java/synapticloop/sample/h2zero/counter/UserCounter.java</code><br />[<a href="src/main/java/synapticloop/sample/h2zero/counter/UserCounter.java">plain java</a> | <a href="src/main/java/synapticloop/sample/h2zero/counter/UserCounter.java.html">pretty-printed</a>]</li></ul><p>With the following method signatures</p><pre class="prettyprint lang-java"><code>public static int countNumberOfUsersOverAge(Integer numAge) throws H2ZeroFinderException, SQLException 
public static int countNumberOfUsersOverAge(Connection connection, Integer numAge) throws H2ZeroFinderException, SQLException 
public static int countNumberOfUsersOverAgeSilent(Integer numAge)
public static int countNumberOfUsersOverAgeSilent(Connection connection, Integer numAge)
</code></pre><blockquote>Please see the <a href="method-signatures.html"><code>method signatures</code></a> page for information about usage patterns for the various method signatures that are generated.</blockquote><h4>Example 3: Parameterised Count with dual value parameter</h4><pre class="prettyprint"><code>"counters": [
	{
		"name": "countNumberOfUsersBetweenAge",
		"selectClause": "select count(*) from user",
		"whereClause": "where num_age &gt; ? and num_age &lt; ?",
		"whereFields": [
			{ "name": "num_age", "alias": "numAgeFrom" },
			{ "name": "num_age", "alias": "numAgeTo" }
		]
	}
]
</code></pre><p>The code that is generated for the above counter resides in the following file location.</p><ul><li><code>src/main/java/synapticloop/sample/h2zero/counter/UserCounter.java</code><br />[<a href="src/main/java/synapticloop/sample/h2zero/counter/UserCounter.java">plain java</a> | <a href="src/main/java/synapticloop/sample/h2zero/counter/UserCounter.java.html">pretty-printed</a>]</li></ul><p>With the following method signatures</p><pre class="prettyprint lang-java"><code>public static int countNumberOfUsersBetweenAge(Integer numAgeFrom, Integer numAgeTo) throws H2ZeroFinderException, SQLException
public static int countNumberOfUsersBetweenAge(Connection connection, Integer numAgeFrom, Integer numAgeTo) throws H2ZeroFinderException, SQLException
public static int countNumberOfUsersBetweenAgeSilent(Integer numAgeFrom, Integer numAgeTo)
public static int countNumberOfUsersBetweenAgeSilent(Connection connection, Integer numAgeFrom, Integer numAgeTo)
</code></pre><blockquote>Please see the <a href="method-signatures.html"><code>method signatures</code></a> page for information about usage patterns for the various method signatures that are generated.</blockquote><h4>Example 4: Parameterised Counter with in: designator fields</h4><pre class="prettyprint"><code>"questions": [
	{
		"name": "countUsersInAges",
		"selectClause": "select count(*) &gt; 0 from user",
		"whereClause": "where num_age in (...)",
		"whereFields": [
			"in:num_age"
		]
	}
]
</code></pre><p>In the above example, the count being given is the number of users that have an age that equals that of the passed in list</p><p>Note both the <a href="clauses-and-fields.html#whereClause"><code>whereClause</code></a> having the ellipses (<code>...</code>) to designate that this is an <code>in</code> query and the <a href="clauses-and-fields.html#whereFields"><code>whereFields</code></a> using the specialised <code>in:</code> designator.</p><p>The code generation uses these two parts in order to correctly specify the method parameters and the way in which a <code>PreparedStatement</code> is constructed.</p><p>The code that is generated for the above counter resides in the following file location.</p><ul><li><code>src/main/java/synapticloop/sample/h2zero/counter/UserCounter.java</code><br />[<a href="src/main/java/synapticloop/sample/h2zero/counter/UserCounter.java">plain java</a> | <a href="src/main/java/synapticloop/sample/h2zero/counter/UserCounter.java.html">pretty-printed</a>]</li></ul><p>With the following method signatures</p><pre class="prettyprint lang-java"><code>public static int countUsersInAges(List&lt;Integer&gt; numAgeList) throws H2ZeroFinderException, SQLException
public static int countUsersInAges(Connection connection, List&lt;Integer&gt; numAgeList) throws H2ZeroFinderException, SQLException
public static int countUsersInAgesSilent(List&lt;Integer&gt; numAgeList)
public static int countUsersInAgesSilent(Connection connection, List&lt;Integer&gt; numAgeList)
</code></pre><blockquote>Please see the <a href="method-signatures.html"><code>method signatures</code></a> page for information about usage patterns for the various method signatures that are generated.</blockquote></section><script type="text/javascript">
	var _paq = _paq || [];
	_paq.push(['trackPageView']);
	_paq.push(['enableLinkTracking']);
	(function() {
		var u="//piwik.synapticloop.com/";
		_paq.push(['setTrackerUrl', u+'piwik.php']);
		_paq.push(['setSiteId', 13]);
		var d=document, g=d.createElement('script'), s=d.getElementsByTagName('script')[0];
		g.type='text/javascript'; g.async=true; g.defer=true; g.src=u+'piwik.js'; s.parentNode.insertBefore(g,s);
	})();
</script>
<noscript><p><img src="//piwik.synapticloop.com/piwik.php?idsite=13" style="border:0;" alt="" /></p></noscript>
</div><script src="javascripts/scale.fix.js"></script></body></html>