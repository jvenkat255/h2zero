<!doctype html>
<html>
{import src/imports/head.templar}
<body>
	<div class="wrapper">
		{import src/imports/sidenav.templar}
		<section>

			<h3>
				<a id="h2zero-pages" class="anchor" href="#h2zero-pages" aria-hidden="true"><span class="octicon octicon-link"></span></a>Tables.
			</h3>

			<p>
				Tables are the base object that then generates the model objects for interaction through the java code.  As 
				such  they are relatively straight-forward, the field definitions are the next important piece of the h2zero 
				generation.
			</p>
			<p>
				For each database schema, there must be a JSONArray keyed on {import src/imports/links/tables.templar} 
				of JSONObjects
			</p>

			<pre class="prettyprint">
				<code>
"tables": [{\n}
{\t}{{{\n}
{\t}{\t}"name": "user_type",{\n}
{\t}{\t}"engine": "innodb",{\n}
{\t}{\t}"charset": "UTF8",{\n}
{\t}{\t}"comments": [
{\t}{\t}{\t}"comment for the table, which is an array and can be on multiple",
{\t}{\t}{\t}"lines"{\n}
{\t}{\t}],{\n}
{\t}{\t}...{\n}
{\t}},{\n}
{\t}{{{\n}
{\t}{\t}"name": "user",{\n}
{\t}{\t}...{\n}
{\t}},{\n}
]{\n}
				</code>
			</pre>

			{import src/imports/tables/allowable-table-key-value-pairs.templar}

			<p>
				Each table <strong>MUST</strong> have a key of <code>name</code> which 
				will map to the database schema and model object in CamelCase naming 
				conventions.
			</p>

			<p>
				For example the <code>user_type</code> table name above will generate the 
				following model object
			</p>

			<p>
				<em>
					The <code>user_type</code> table is a <u>Constant Model</u> and differs 
					from normal other models in that constant tables cannot be updated, deleted 
					or inserted into as they are pre-generated by h2zero.
				</em>
			</p>

			{set tableUserTypeCodeLink as code}
			{import src/imports/links/link-to-code.templar}

			<p>
				The <code>user</code> table name above will generate the 
				following model object
			</p>

			{set tableUserCodeLink as code}
			{import src/imports/links/link-to-code.templar}

			<p>
				<em>
					The <code>user</code> table is a <u>Regular Model</u> object that maps to the underlying MySQL table 
					and h2zero will allow generation of all create, read, update and delete (CRUD) methods.
				</em>
			</p>


			{import src/imports/base-generated-methods.templar}


			<h4>Constant Models</h4>

			<p>
				<em>See the section on {import src/imports/links/constants.templar} for more information on how to generate them.</em>
			</p>


			<h4>Regular Models</h4>

			<p>
				Regular models are the default generation for h2zero and, as opposed to {import src/imports/links/constants.templar}, 
				allow access to insert new rows into the database and have access to the full range of interactions.  This is the 
				foundation for the h2zero generation.
			</p>

			<h4>Additional methods and member variables</h4>

			<p>
				In addition to the general generation mentioned above, for each of the constant models, the following field and 
				method signatures are generated:
			</p>

			<p><strong>Static Final Member Variable References</strong></p>

			<pre class="prettyprint lang-java">
				<code>
private static final String SQL_INSERT = "insert into user values (?, ?, ?, ?, ?, ?, ?, ?)";{\n}
private static final String SQL_UPDATE = "update user set id_user_type = ?, fl_is_alive = ?, num_age = ?, nm_username = ?, txt_address_email = ?, txt_password = ?, dtm_signup = ? where " + PRIMARY_KEY_FIELD + " = ?";{\n}
private static final String SQL_DELETE = "delete from user where " + PRIMARY_KEY_FIELD + " = ?";{\n}
private static final String SQL_ENSURE = "select " + PRIMARY_KEY_FIELD + " from user where id_user_type = ? and fl_is_alive = ? and num_age = ? and nm_username = ? and txt_address_email = ? and txt_password = ? and dtm_signup = ?";{\n}
				</code>
			</pre>

			<p>
				The basic CRUD operations for the model.  Each model knows how to create, read, update and delete itself from 
				the database.  There is also an 'ensure' mode, which will be covered later in this documentation set.
			</p>

			<p><strong>Constructors</strong></p>

			<pre class="prettyprint lang-java">
				<code>
public User(Long idUser, Long idUserType, Boolean flIsAlive, Integer numAge, String nmUsername, String txtAddressEmail, String txtPassword, Timestamp dtmSignup){\n}
public User(Long idUser, Long idUserType, Integer numAge, String nmUsername, String txtAddressEmail, String txtPassword) {\n}
				</code>
			</pre>

			<p>
				Along with the defaut constructor with parameters for all fields, there is also a constructor for all of the 
				non-null fields within the table.
			</p>

			<h4>Interactions</h4>

			{import src/imports/method-signatures-explanation.templar}

			<p><strong>inserts - CRUD operators (and then some)</strong></p>

			<pre class="prettyprint lang-java">
				<code>
public void insert(Connection connection) throws SQLException, H2ZeroPrimaryKeyException {\n}
public void insertSilent(Connection connection) {\n}
public void insert() throws SQLException, H2ZeroPrimaryKeyException {\n}
public void insertSilent() {\n}
				</code>
			</pre>

			<p>
				When a new java model is instantiated, this will insert it into the database and retrieve the primary key from 
				the insertion and populate the member variable.
			</p>

			<p><strong>ensure - CRUD operators (and then some)</strong></p>

			<pre class="prettyprint lang-java">
				<code>
public void ensure(Connection connection) throws SQLException, H2ZeroPrimaryKeyException {\n}
public void ensureSilent(Connection connection) {\n}
public void ensure() throws SQLException, H2ZeroPrimaryKeyException {\n}
public void ensureSilent() {\n}
				</code>
			</pre>

			<p>
				Ensure that there is a row in the database table with exactly the matching member variables.  If it exists, the 
				primary key variable will be set, otherwise it will be inserted.  I.e. Ensure that there is a row in the database.
			</p>

			<p><strong>updates - CRUD operators (and then some)</strong></p>

			<pre class="prettyprint lang-java">
				<code>
public void update(Connection connection) throws SQLException, H2ZeroPrimaryKeyException {\n}
public void updateSilent(Connection connection) {\n}
public void update() throws SQLException, H2ZeroPrimaryKeyException {\n}
public void updateSilent() {\n}
				</code>
			</pre>

			<p>
				Persist the model to the database, only if there have been some changes to the model object (i.e. has the flag 
				<code>isDirty</code> sit), otherwise it will do nothing.
				nothing.
			</p>

			<p>
				Note: the method signatures that throw an <code>H2ZeroPrimaryKeyException</code> do so if the primary key is null.
			</p>

			<p><strong>insert or updates - CRUD operators (and then some)</strong></p>

			<pre class="prettyprint lang-java">
				<code>
public void insertOrUpdateSilent() {\n}
				</code>
			</pre>

			<p>
				Insert the model if the primary key is null, otherwise update it (subject to the same caveats as an insert above).
			</p>

			<p><strong>deletes - CRUD operators (and then some)</strong></p>

			<pre class="prettyprint lang-java">
				<code>
public void delete(Connection connection) throws SQLException, H2ZeroPrimaryKeyException{\n}
public void deleteSilent(Connection connection) {\n}
public void delete() throws SQLException, H2ZeroPrimaryKeyException {\n}
public void deleteSilent() {\n}
				</code>
			</pre>

			<p>
				Delete this model from its corresponding row in the database.
			</p>

			<p>
				Note: the method signatures that throw an <code>H2ZeroPrimaryKeyException</code> do so if the primary key is null.
			</p>

			<p><strong>refreshes - CRUD operators (and then some)</strong></p>

			<pre class="prettyprint lang-java">
				<code>
public void refresh() throws H2ZeroPrimaryKeyException {\n}
public void refreshSilent() {\n}
				</code>
			</pre>


			<p><strong>Foreign key references</strong></p>

			<pre class="prettyprint lang-java">
				<code>
public UserType getUserType() {\n}
				</code>
			</pre>

			<p>
				Where there is a foreign key reference to the table, not only can you retrieve the id for the foreign key, you may 
				also get a direct reference to the model object, which will automatically find the object in the foreign table.
			</p>

			<p>
				In the above code example this will retrieve the <code>UserType</code> object from the database with the 
				associated primary key.
			</p>

			<p>
				<em>
					Note: In the case of a constant model (as is above) the lookup field on the constant model will be used, rather 
					than a database query.
				</em>
			</p>

			<p><strong>Getters and setters</strong></p>

			<pre class="prettyprint lang-java">
				<code>
public void setIdUser(Long idUser) {{if(isDifferent(this.idUser, idUser)) {{this.idUser = idUser;this.isDirty = true;}}{\n}
				</code>
			</pre>

			<p>
				All getters are generated, the setters are generated (in highly compressed format) with a conditional check to ensure that if the member variable 
				has not changed, the model will not be marked as dirty and any call to the update method signatures will do nothing.
			</p>

		</section>
		{import src/imports/footer.templar}
	</div>
	<script src="javascripts/scale.fix.js"></script>

</body>
</html>